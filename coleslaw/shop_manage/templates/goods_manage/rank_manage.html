{% extends "layouts/shop_base.html" %}
{% load static %}

{% block stylesheets %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
{% endblock stylesheets %}

{% block main %}
<main id="main" class="main">
    <div class="pagetitle">
        <h1>Goods Manage</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'shop_manage:home' shop.id %}">Home</a></li>
            <li class="breadcrumb-item active">Goods {{rank_type}} Rank Manage</li>
          </ol>
        </nav>
    </div><!-- End Page Title -->
      <section class="section">
        <div class="card">
          <div class="card-body">
            <div class="row justify-content-between">
                <div class="col">
                    <h5 class="card-title">Goods {{rank_type}} Rank Manage</h5>
                </div>
                <div class="col-auto">
                    <div class="icon mt-3"><a href="{% url 'shop_manage:goods_manage' shop.id %}"><i class="bi bi-list"></i> 목록</a></div>
                </div>
            </div>
            <form id="search-form" class="p-2" method="get" action="">
                <div class="row mb-2">
                  <label for="category" class="col-sm-2 col-form-label">카테고리 분류</label>
                  <div class="col-sm-4">
                      <select  class="selectpicker form-control" id="main_category" name="main_category_id" data-live-search="true" title="대분류 카테고리를 선택해주세요." disabled onchange="selectCategory('main',this.value)">
                      </select>
                  </div>
                  <div class="col-sm-4">
                    <select  class="selectpicker form-control" id="sub_category" name="sub_category_id" data-live-search="true" title="소분류 카테고리를 선택해주세요." disabled onchange="selectCategory('sub',this.value)">
                    </select>
                  </div>
                </div>        
                <div class="row mb-3">
                  <div class="text-center">
                      <a id="btn-initial" class="btn btn-outline-primary" href="{% url 'shop_manage:goods_rank_manage' shop.id %}?rank_type={{rank_type}}">초기화</a>
                  </div>
                </div>
              </form>
          </div>
        </div>
        <div class="card mb-3" >
          <div class="card-body">
                <div class="row justify-content-between">
                    <div class="col-auto">
                        <h5 class="card-title">{{rank_type}} 상품 목록 순서</h5>
                    </div>
                </div>
                <div class="goods-list-container">
                    <p class="text-center text-muted">소분류 카테고리까지 먼저 선택해주세요.</p>
                </div>
            </div>
        </div>
      </section>
</main>
{% endblock %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>
  const shop_id = {{shop.id}};
  const rank_type  = '{{rank_type}}';
  let sub_category_id = 0;
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-sortablejs@1.0.0/jquery-sortable.js"></script>
<script src="{% static 'shop/js/goods_manage/script_rank_manage.js' %}"></script>
{% endblock javascripts %}