{% extends "layouts/shop_base.html" %}
{% load static %}
{% load humanize %}

{% block stylesheets %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
{% endblock stylesheets %}

{% block main %}
<main id="main" class="main">
    <div class="pagetitle">
        <h1>상품 상세</h1>
        <nav>
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'shop_manage:home' shop.id %}">Home</a></li>
              <li class="breadcrumb-item">Goods Manage</li>
              <li class="breadcrumb-item active">Goods Detail</li>
            </ol>
        </nav>
    </div><!-- End Page Title -->
      <section class="section">
        <div class="card">
          <div class="card-body">
            <div class="row justify-content-between">
                <div class="col">
                    <h5 class="card-title">상품 상세</h5>
                </div>
                <div class="col-auto">
                    <div class="icon mt-3"><a href="{% url 'shop_manage:goods_manage' shop.id %}"><i class="bi bi-list"></i> 목록</a></div>
                </div>
                <div class="col-auto">
                    <div class="icon mt-3"><a id="btn-delete" href="#"><i class="bi bi-trash-fill"></i> 삭제</a></div>
                </div>
            </div>
            <form id="data-form" method="post" onsubmit="return false">
                <div class="row mb-3">
                    <label for="category" class="col-sm-2 col-form-label">카테고리 분류</label>
                    <div class="col-sm-5">
                      <select  class="selectpicker form-control" id="main_category" name="main_category" data-live-search="true" title="대분류 카테고리를 선택해주세요." onchange="selectCategory('main',this.value)">
                          {% for i in main_category %}
                          {% if goods.sub_category.main_category.id == i.id %}
                              <option value="{{i.id}}" selected>{{i.name}}</option>
                          {% else %}
                              <option value="{{i.id}}">{{i.name}}</option>
                          {% endif %}
                          {% endfor %}
                        </select>
                    </div>
                    <div class="col-sm-5">
                      <select  class="selectpicker form-control" id="sub_category" name="sub_category" data-live-search="true" title="소분류 카테고리를 선택해주세요.">
                          {% for i in sub_category %}
                          {% if goods.sub_category.id == i.id %}
                              <option value="{{i.id}}" selected>{{i.name}}</option>
                          {% else %}
                              <option value="{{i.id}}">{{i.name}}</option>
                          {% endif %}
                          {% endfor %}
                      </select>
                    </div>
                  </div>
                <div class="row mt-3 mb-3">
                    <label for="goods_name" class="col-sm-2 col-form-label">상품명</label>
                    <div class="col-sm-10">
                        <input type="text" id="goods_name" name="goods_name" class="form-control" placeholder="상품명" value="{{goods.name}}">
                    </div>
                </div>
                <div class="row mt-3 mb-3">
                  <label for="price" class="col-sm-2 col-form-label">상품 가격</label>
                  <div class="col-sm-10">
                      <input type="number" id="price" name="price" class="form-control" placeholder="상품 가격" min="0" oninput="validity.valid||(value='');" value="{{goods.price}}">
                  </div>
                </div>
                <div class="row mt-3 mb-3">
                  <label for="sale_price" class="col-sm-2 col-form-label">핀매 가격</label>
                  <div class="col-sm-10">
                      <input type="number" id="sale_price" name="sale_price" class="form-control" placeholder="판매가격" min="0" oninput="validity.valid||(value='');" value="{{goods.sale_price}}">
                      <small class="form-text text-muted">실제 판매되는 가격</small>
                  </div>
                </div>
                <div class="row mt-3 mb-3">
                  <label for="stock" class="col-sm-2 col-form-label">재고 수량</label>
                  <div class="col-sm-10">
                      <input type="number" id="stock" name="stock" class="form-control" placeholder="재고 수량" min="0" oninput="validity.valid||(value='');" value="{{goods.stock}}">
                  </div>
                </div>
                <div class="row mt-3 mb-3">
                    <label for="image" class="col-sm-2 col-form-label">상품 이미지</label>
                    <div class="col-sm-10">
                      <input type="file" id="image" name="image" class="form-control" accept="image/*">
                      <small class="form-text text-muted">800 * 800 이미지 권장 ( 이미지 변경 시 에만 첨부 )</small>
                    </div>
                </div>
                <div class="row mt-3 mb-3 mx-2">
                  <div class="form-check col-sm-3">
                    {% if goods.status %}
                    <input class="form-check-input" type="checkbox" value="1" id="status" name="status" checked>
                    {% else %}
                    <input class="form-check-input" type="checkbox" value="0" id="status" name="status">
                    {% endif %}
                    <label class="form-check-label" for="status">
                    판매 여부
                    </label>
                  </div>
                  <div class="form-check col-sm-3">
                    {% if goods.soldout %}
                    <input class="form-check-input" type="checkbox" value="1" id="soldout" name="soldout" checked>
                    {% else %}
                    <input class="form-check-input" type="checkbox" value="0" id="soldout" name="soldout">
                    {% endif %}
                    <label class="form-check-label" for="soldout">
                    품절 여부
                    </label>
                  </div>
                  <div class="form-check col-sm-3">
                    {% if goods.stock_flag %}
                    <input class="form-check-input" type="checkbox" value="1" id="stock_flag" name="stock_flag" checked>
                    {% else %}
                    <input class="form-check-input" type="checkbox" value="0" id="stock_flag" name="stock_flag">
                    {% endif %}
                    <label class="form-check-label" for="stock_flag">
                    재고 관리 사용 여부
                    </label>
                  </div>
                  <div class="form-check col-sm-3">
                    {% if goods.option_flag %}
                    <input class="form-check-input" type="checkbox" value="1" id="option_flag" name="option_flag" checked>
                    {% else %}
                    <input class="form-check-input" type="checkbox" value="0" id="option_flag" name="option_flag">
                    {% endif %}
                    <label class="form-check-label" for="option_flag">
                    옵션 사용 여부
                    </label>
                  </div>
                </div>
                <div class="row mb-3">
                    <label class="col-sm-2 col-form-label"></label>
                    <div class="col-sm-12 text-center">
                        <a href="{% url 'shop_manage:goods_detail' shop.id goods.id %}" class="btn btn-danger">취소</a>
                        <button type="button" id="btn-submit" class="btn btn-success">저장</button>         
                    </div>
                </div>
            </form>
          </div>
        </div>
      </section>
</main>
{% endblock %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
<script src="{% static 'shop/js/goods_manage/script_goods_edit.js' %}"></script>
{% endblock javascripts %}

